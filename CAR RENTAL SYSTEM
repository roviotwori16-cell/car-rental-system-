import java.util.ArrayList;
import java.util.Scanner;

// ---------------- CAR CLASS ----------------
class Car {
    private String id;
    private String model;
    protected double pricePerDay;
    private boolean available = true;

    public Car(String id, String model, double pricePerDay) {
        this.id = id;
        this.model = model;
        this.pricePerDay = pricePerDay;
    }

    public String getId() {
        return id;
    }

    public String getModel() {
        return model;
    }

    public boolean isAvailable() {
        return available;
    }

    public void rent() {
        available = false;
    }

    public void returnCar() {
        available = true;
    }

    public double calculateCost(int days) {
        return days * pricePerDay;
    }

    public void display() {
        System.out.println(id + " | " + model + " | KES " + pricePerDay + " | " +
                (available ? "Available" : "Rented"));
    }
}

// ---------------- INHERITANCE ----------------
class LuxuryCar extends Car {

    public LuxuryCar(String id, String model, double pricePerDay) {
        super(id, model, pricePerDay);
    }

    // Polymorphism
    @Override
    public double calculateCost(int days) {
        return super.calculateCost(days) + 3000; // luxury fee
    }
}

// ---------------- CUSTOMER ----------------
class Customer {
    private String id;
    private String name;

    public Customer(String id, String name) {
        this.id = id;
        this.name = name;
    }

    public String getId() {
        return id;
    }

    public String getName() {
        return name;
    }
}

// ---------------- RENTAL AGENCY ----------------
class RentalAgency {

    private ArrayList<Car> cars = new ArrayList<>();
    private ArrayList<Customer> customers = new ArrayList<>();

    public void addCar(Car car) {
        cars.add(car);
    }

    public void addCustomer(Customer customer) {
        customers.add(customer);
    }

    public void showCars() {
        for (Car car : cars) {
            if (car.isAvailable()) {
                car.display();
            }
        }
    }

    public Car findCar(String id) {
        for (Car car : cars) {
            if (car.getId().equals(id)) {
                return car;
            }
        }
        return null;
    }

    public Customer findCustomer(String id) {
        for (Customer customer : customers) {
            if (customer.getId().equals(id)) {
                return customer;
            }
        }
        return null;
    }

    public void rentCar(String carId, String customerId, int days) {
        Car car = findCar(carId);
        Customer customer = findCustomer(customerId);

        if (car == null || customer == null || !car.isAvailable()) {
            System.out.println("Rental failed.");
            return;
        }

        car.rent();
        System.out.println("Rented to: " + customer.getName());
        System.out.println("Car: " + car.getModel());
        System.out.println("Cost: KES " + car.calculateCost(days));
    }
}

// ---------------- MAIN CLASS ----------------
public class CarRentalSystem {

    public static void main(String[] args) {

        RentalAgency agency = new RentalAgency();

        agency.addCar(new Car("C1", "Toyota Corolla", 3000));
        agency.addCar(new LuxuryCar("C2", "Mercedes Benz", 8000));

        agency.addCustomer(new Customer("U1", "Alice"));
        agency.addCustomer(new Customer("U2", "Brian"));

        Scanner input = new Scanner(System.in);

        while (true) {
            System.out.println("\n1. View Cars");
            System.out.println("2. Rent Car");
            System.out.println("3. Exit");
            System.out.print("Choice: ");

            int choice = input.nextInt();
            input.nextLine();

            if (choice == 1) {
                agency.showCars();
            } 
            else if (choice == 2) {
                System.out.print("Car ID: ");
                String carId = input.nextLine();
                System.out.print("Customer ID: ");
                String custId = input.nextLine();
                System.out.print("Days: ");
                int days = input.nextInt();

                agency.rentCar(carId, custId, days);
            } 
            else if (choice == 3) {
                System.out.println("Goodbye!");
                break;
            } 
            else {
                System.out.println("Invalid option.");
            }
        }

        input.close();
    }
}
